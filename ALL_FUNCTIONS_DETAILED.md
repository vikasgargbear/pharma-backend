# All Functions in AASO Pharma Backend

Total Functions: 573

## api (223 functions)

### api/business_logic.py
- __init__
- _create_order_journal_entries
- _update_customer_outstanding
- apply_advance_payment
- apply_eligible_discounts
- calculate_discount
- create_challan_from_order
- create_payment_with_allocation
- deliver_challan
- dispatch_challan
- get_batch_status
- get_fifo_batches
- is_customer_eligible
- process_complete_order
- process_expiry_management
- process_order_inventory
- process_payment_received
- process_purchase_inventory
- process_sales_return
- process_stock_adjustment
- update_batch_status
- update_order_payment_status

### api/crud.py
- add_challan_tracking
- apply_advance_payment_to_order
- award_loyalty_points
- create_batch
- create_batch_location
- create_cart
- create_cart_item
- create_cdsco_compliance
- create_challan
- create_challan_from_order
- create_customer
- create_customer_advance_payment
- create_customer_credit_note
- create_customer_outstanding
- create_discount_scheme
- create_enhanced_regulatory_license
- create_inventory_movement
- create_inventory_transaction
- create_journal_entry
- create_license_document
- create_loyalty_program
- create_loyalty_transaction
- create_medical_representative
- create_order
- create_order_item
- create_order_with_business_logic
- create_payment
- create_payment_allocation
- create_payment_with_allocation
- create_price_history
- create_product
- create_purchase
- create_purchase_item
- create_purchase_return
- create_purchase_return_item
- create_regulatory_license
- create_sales_return
- create_state_compliance
- create_storage_location
- create_supplier
- create_tax_entry
- create_user
- create_vendor_payment
- delete_batch
- delete_cart
- delete_cart_item
- delete_customer
- delete_discount_scheme
- delete_inventory_movement
- delete_journal_entry
- delete_medical_representative
- delete_order
- delete_order_item
- delete_payment
- delete_product
- delete_purchase
- delete_purchase_item
- delete_regulatory_license
- delete_sales_return
- delete_supplier
- delete_tax_entry
- delete_user
- delete_vendor_payment
- dispatch_challan
- enroll_customer_in_loyalty
- generate_upi_qr_code
- get_active_loyalty_programs
- get_applied_discounts
- get_batch
- get_batch_inventory_status
- get_batch_inventory_transactions
- get_batch_location
- get_batch_locations
- get_batch_recommendations
- get_batches
- get_cart
- get_cart_by_user
- get_cart_item
- get_cart_items
- get_cdsco_compliance
- get_challan
- get_challan_items
- get_challan_tracking
- get_challans
- get_compliance_dashboard
- get_customer
- get_customer_active_challans
- get_customer_advance_balance
- get_customer_advance_payment
- get_customer_advance_payments
- get_customer_credit_note
- get_customer_credit_notes
- get_customer_loyalty
- get_customer_outstanding
- get_customer_outstanding_record
- get_customer_pending_deliveries
- get_customer_upi_payments
- get_customers
- get_discount_scheme
- get_discount_schemes
- get_enhanced_regulatory_licenses
- get_expiring_licenses
- get_expiring_licenses_enhanced
- get_expiry_alerts
- get_fifo_batch_allocation
- get_file_by_id
- get_files_by_entity
- get_inventory_movement
- get_inventory_movements
- get_inventory_transactions
- get_journal_entries
- get_journal_entry
- get_license_documents
- get_low_stock_batches
- get_loyalty_program
- get_medical_representative
- get_medical_representatives
- get_order
- get_order_item
- get_order_items
- get_orders
- get_out_of_stock_batches
- get_payment
- get_payment_allocation
- get_payment_allocations
- get_payments
- get_pending_challans
- get_pending_document_verifications
- get_price_history
- get_price_history_record
- get_product
- get_products
- get_purchase
- get_purchase_item
- get_purchase_items
- get_purchase_return
- get_purchase_return_item
- get_purchase_return_items
- get_purchase_returns
- get_purchases
- get_regulatory_license
- get_regulatory_licenses
- get_sales_return
- get_sales_returns
- get_state_compliance
- get_storage_location
- get_storage_locations
- get_supplier
- get_suppliers
- get_tax_entries
- get_tax_entry
- get_upi_payment_by_merchant_id
- get_user
- get_users
- get_vendor_payment
- get_vendor_payments
- process_payment_with_updates
- process_sales_return_inventory
- process_stock_adjustment
- reconcile_upi_payment
- redeem_loyalty_points
- update_adr_report
- update_batch
- update_batch_location
- update_cart
- update_cart_item
- update_cdsco_monthly_report
- update_challan
- update_customer
- update_customer_advance_payment
- update_customer_credit_note
- update_customer_outstanding
- update_discount_scheme
- update_inspection_record
- update_inventory_movement
- update_journal_entry
- update_license_compliance_score
- update_medical_representative
- update_order
- update_order_item
- update_payment
- update_product
- update_purchase
- update_purchase_item
- update_purchase_return
- update_regulatory_license
- update_sales_return
- update_storage_location
- update_supplier
- update_tax_entry
- update_upi_payment_status
- update_user
- update_vendor_payment
- upload_file
- verify_file_upload
- verify_license_document

### api/database.py
- check_database_connection
- get_db_session
- init_database

### api/dependencies.py
- check_permission

### api/initialize_db.py
- initialize_database


## api/core (53 functions)

### api/core/audit.py
- log_api_access
- log_authentication
- log_data_change
- log_security_event
- log_system_event

### api/core/config.py
- database_url
- get_database_info
- get_supabase_client
- is_supabase
- parse_env_var

### api/core/crud_base.py
- __init__
- count
- create
- create_crud
- exists
- get
- get_active
- get_by_field
- get_multi
- remove
- update

### api/core/database_manager.py
- __init__
- _create_engine
- can_execute
- get_database_manager
- get_db
- get_health_status
- get_session
- initialize
- record_failure
- record_success
- test_connection

### api/core/security.py
- __init__
- handle_database_error
- setup_error_handlers

### api/core/validators.py
- sanitize_html
- sanitize_sql_input
- validate_and_sanitize_text
- validate_batch_number
- validate_drug_schedule
- validate_drug_schedule_field
- validate_email_format
- validate_expiry_date
- validate_gst_number
- validate_gst_number_field
- validate_hsn_code
- validate_no_script_tags
- validate_percentage
- validate_phone_field
- validate_phone_number
- validate_positive_amount
- validate_positive_price
- validate_quantity


## api/migrations (17 functions)

### api/migrations/add_customer_columns.py
- add_customer_enterprise_columns
- create_sample_customer_data
- get_existing_columns

### api/migrations/add_drug_schedule_and_cart.py
- run_migration

### api/migrations/add_inventory_tables.py
- add_inventory_columns_to_products
- add_inventory_enterprise_tables
- create_batches_table
- create_inventory_movements_table
- create_sample_inventory_data
- get_existing_tables

### api/migrations/add_order_columns.py
- add_order_enterprise_columns
- create_sample_order_data

### api/migrations/add_product_details.py
- run_migration

### api/migrations/create_billing_tables.py
- create_billing_tables
- drop_billing_tables

### api/migrations/fix_order_columns.py
- fix_missing_columns

### api/migrations/migrate_to_numeric_ids.py
- run_migration


## api/routers (243 functions)

### api/routers/analytics.py
- export_comprehensive_report
- get_cash_flow_analysis
- get_customer_segmentation
- get_dashboard_overview
- get_demand_forecast
- get_financial_summary
- get_inventory_status
- get_inventory_turnover
- get_operational_efficiency
- get_sales_summary
- get_sales_trend
- get_top_selling_products

### api/routers/batches.py
- create_batch
- delete_batch
- get_batch_analytics
- get_batch_current_stock
- get_batches_expiring_by_month
- get_expired_batches
- get_expiring_batches
- get_expiry_timeline
- get_product_batches
- get_supplier_batches
- get_wastage_analysis
- mark_batch_expired
- read_batch
- read_batches
- search_batches_by_number
- update_batch

### api/routers/challans.py
- cancel_challan
- create_challan
- create_challan_from_order
- create_challan_item
- delete_challan
- delete_challan_item
- deliver_challan
- dispatch_challan
- get_challan_analytics
- get_challan_print_data
- get_customer_challans
- get_customer_pending_challans
- get_daily_challan_report
- get_delivery_performance
- read_challan
- read_challan_items
- read_challans
- update_challan
- update_challan_item

### api/routers/compliance.py
- create_audit_log
- create_compliance_check
- create_license
- create_regulatory_report
- export_audit_report
- generate_monthly_compliance_report
- get_audit_log
- get_audit_logs
- get_audit_trail_analytics
- get_compliance_analytics
- get_compliance_check
- get_compliance_checks
- get_drug_licensing_report
- get_expiring_licenses
- get_license
- get_licenses
- get_regulatory_report
- get_regulatory_reports
- resolve_compliance_check
- submit_regulatory_report
- update_license

### api/routers/customers.py
- create_customer
- create_customer_credit_note
- create_customer_outstanding
- delete_customer
- get_customer_active_challans
- get_customer_advance_balance
- get_customer_advance_payments
- get_customer_payment_summary
- read_customer
- read_customer_credit_note
- read_customer_credit_notes
- read_customer_outstanding
- read_customer_outstanding_record
- read_customers
- update_customer
- update_customer_credit_note
- update_customer_outstanding

### api/routers/file_uploads.py
- delete_file
- download_file
- generate_unique_filename
- get_compliance_certificates
- get_customer_documents
- get_entity_files
- get_file
- get_file_analytics
- get_files
- get_license_documents
- get_product_images
- get_recent_uploads
- save_file_locally
- save_file_supabase
- validate_file

### api/routers/inventory.py
- create_batch_location
- create_inventory_movement
- create_inventory_transaction
- create_storage_location
- delete_inventory_movement
- get_batch_inventory_status
- get_batch_inventory_transactions
- get_fifo_batch_allocation
- get_inventory_alerts
- get_low_stock_batches
- get_out_of_stock_batches
- read_batch_location
- read_batch_locations
- read_inventory_movement
- read_inventory_movements
- read_inventory_transactions
- read_storage_location
- read_storage_locations
- update_batch_location
- update_inventory_movement
- update_storage_location

### api/routers/loyalty.py
- calculate_tier
- create_loyalty_account
- create_reward
- earn_points
- get_available_rewards
- get_customer_engagement_analytics
- get_customer_loyalty_account
- get_customer_redemptions
- get_loyalty_account
- get_loyalty_accounts
- get_loyalty_analytics
- get_points_transactions
- get_reward
- get_rewards
- get_tier_benefits
- get_tier_performance_analytics
- redeem_points
- redeem_reward
- update_loyalty_account
- upgrade_customer_tier

### api/routers/orders.py
- create_complete_order
- create_order
- create_order_item
- delete_order
- delete_order_item
- get_order_payment_status
- read_order
- read_order_item
- read_order_items
- read_orders
- update_order
- update_order_item

### api/routers/payments.py
- apply_advance_to_order
- create_advance_payment
- create_payment
- create_payment_with_allocation
- create_vendor_payment
- delete_payment
- delete_vendor_payment
- read_payment
- read_payment_allocations
- read_payments
- read_vendor_payment
- read_vendor_payments
- update_advance_payment
- update_payment
- update_vendor_payment

### api/routers/products.py
- create_product
- delete_product
- get_product
- get_products
- update_product

### api/routers/purchases.py
- create_purchase
- create_purchase_item
- create_purchase_return
- create_purchase_return_item
- create_supplier
- delete_purchase
- delete_purchase_item
- delete_supplier
- get_parser_health
- get_parsing_confidence_metrics
- get_purchase_analytics
- get_supplier_analytics
- read_purchase
- read_purchase_item
- read_purchase_items
- read_purchase_return
- read_purchase_return_item
- read_purchase_return_items
- read_purchase_returns
- read_purchases
- read_supplier
- read_suppliers
- update_purchase
- update_purchase_item
- update_purchase_return
- update_supplier

### api/routers/sales_returns.py
- create_sales_return
- delete_sales_return
- get_customer_sales_returns
- get_order_sales_returns
- get_sales_return_analytics
- process_sales_return
- read_sales_return
- read_sales_returns
- update_sales_return

### api/routers/stock_adjustments.py
- adjust_batch_stock
- create_stock_adjustment
- get_adjustments_by_reason
- get_batch_adjustments
- get_stock_adjustment_analytics
- read_stock_adjustment
- read_stock_adjustments

### api/routers/tax_entries.py
- calculate_tax
- create_tax_entry
- delete_tax_entry
- get_gst_summary
- get_order_tax_summary
- get_pending_tax_returns
- get_tax_report_summary
- read_tax_entries
- read_tax_entry
- update_tax_entry

### api/routers/users.py
- change_password
- create_access_token
- create_role
- delete_user
- get_active_sessions
- get_current_user
- get_current_user_profile
- get_password_hash
- get_roles
- get_user
- get_user_analytics
- get_users
- login_user
- logout_user
- register_user
- update_current_user
- update_user
- verify_password


## api/schemas_v2 (7 functions)

### api/schemas_v2/billing.py
- validate_date_range
- validate_due_date

### api/schemas_v2/customer.py
- validate_gstin
- validate_pan

### api/schemas_v2/inventory.py
- validate_expiry

### api/schemas_v2/order.py
- calculate_line_total
- validate_delivery_date


## api/services (30 functions)

### api/services/billing_service.py
- calculate_gst_amounts
- create_invoice_from_order
- generate_invoice_number
- get_gstr1_summary
- get_invoice
- get_invoice_summary
- record_payment

### api/services/customer_service.py
- generate_customer_code
- get_customer_ledger
- get_customer_statistics
- get_outstanding_invoices
- record_payment
- validate_credit_limit

### api/services/inventory_service.py
- calculate_days_to_expiry
- create_batch
- get_batch
- get_current_stock
- get_expiry_alert_level
- get_expiry_alerts
- get_inventory_dashboard
- get_stock_valuation
- process_stock_adjustment
- record_stock_movement

### api/services/order_service.py
- allocate_inventory
- calculate_order_totals
- generate_invoice_number
- generate_order_number
- get_order_dashboard
- process_return
- validate_inventory


